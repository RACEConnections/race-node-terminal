<section id="feedback-hub" class="hidden mt-8 border-t border-green-900 pt-6">
    <h2 class="text-[10px] text-blue-400 font-bold uppercase mb-4 flex justify-between">
        <span>Secure Feedback Hub</span>
        <span class="text-[8px] bg-blue-900/30 px-2 py-0.5 rounded">Power Node Access Only</span>
    </h2>

    <form id="bug-report-form" class="space-y-3">
        <div>
            <label class="text-[8px] text-green-800 uppercase">Issue Category</label>
            <select id="issue-type" class="w-full bg-black border border-green-900 text-[10px] p-2 text-green-400">
                <option value="ui">UI/UX Layout Break</option>
                <option value="contract">Smart Contract Logic</option>
                <option value="performance">Network Latency (Core DAO)</option>
                <option value="other">General Strategy Suggestion</option>
            </select>
        </div>

        <div>
            <label class="text-[8px] text-green-800 uppercase">Detailed Intel / Proof of Concept</label>
            <textarea id="issue-desc" placeholder="Describe the bug or proposal..." class="w-full bg-black border border-green-900 p-2 text-[10px] h-24 focus:border-blue-400 outline-none"></textarea>
        </div>

        <button type="button" onclick="submitFeedback()" class="w-full border border-blue-500 text-blue-400 py-3 text-[10px] font-bold hover:bg-blue-500 hover:text-black transition-all">
            SUBMIT_REPORT_TO_FOUNDER
        </button>
        <p id="form-status" class="text-[7px] text-center uppercase mt-2"></p>
    </form>
</section>

<script>
    // ADD THIS LOGIC to your existing syncBalancesAndNotices function
    function updateFeedbackVisibility(balance) {
        const amount = Number(balance) / 1e18;
        const hub = document.getElementById('feedback-hub');
        
        // Gate: Power Nodes (100k) and Elite Nodes (1M)
        if (amount >= 100000) {
            hub.classList.remove('hidden');
        } else {
            hub.classList.add('hidden');
        }
    }

    async function submitFeedback() {
        const status = document.getElementById('form-status');
        const data = {
            wallet: window.userAddress,
            type: document.getElementById('issue-type').value,
            desc: document.getElementById('issue-desc').value,
            timestamp: new Date().toISOString()
        };

        status.innerText = "ENCRYPTING & SENDING...";
        
        // Use a free service like Formspree or a Google Sheet via Zapier
        try {
            const response = await fetch("https://formspree.io/f/YOUR_FORM_ID", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                status.innerText = "SUCCESS: INTEL RECEIVED";
                document.getElementById('bug-report-form').reset();
            }
        } catch (err) {
            status.innerText = "ERROR: UPLINK FAILED";
        }
    }
</script>
