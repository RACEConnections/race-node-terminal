<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R.A.C.E. SENTINEL TERMINAL v5.3</title>
    <style>
        :root { --gold: #D4AF37; --green: #00FF41; --bg: #050505; --red: #ff3333; --cyan: #00FFFF; }
        body { background: var(--bg); color: var(--green); font-family: 'Courier New', monospace; margin: 0; padding: 10px; }
        .terminal-border { border: 2px solid var(--gold); padding: 15px; max-width: 480px; margin: auto; box-shadow: 0 0 15px rgba(212, 175, 55, 0.2); }
        .header { text-align: center; border-bottom: 1px solid var(--gold); padding-bottom: 10px; margin-bottom: 20px; }
        .box { background: #111; border: 1px solid #333; padding: 12px; margin-bottom: 15px; }
        label { display: block; font-size: 10px; color: var(--gold); text-transform: uppercase; margin-bottom: 5px; }
        input, select { width: 100%; box-sizing: border-box; background: #000; color: #fff; border: 1px solid #444; padding: 12px; font-family: inherit; }
        .btn { border: none; padding: 18px; font-weight: bold; cursor: pointer; width: 100%; text-transform: uppercase; transition: 0.3s; }
        .btn-push { background: var(--gold); color: #000; }
        .btn-push:hover { background: #fff; }
        .btn-incident { background: transparent; border: 1px solid var(--red); color: var(--red); margin-top: 15px; font-size: 11px; }
        #status { font-size: 10px; text-align: center; margin-top: 10px; color: var(--cyan); height: 15px; }
    </style>
</head>
<body>

<div class="terminal-border">
    <div class="header">
        <div style="font-size: 20px; font-weight: bold; letter-spacing: 2px;">R.A.C.E. LIAISON</div>
        <div style="font-size: 9px; color: var(--cyan);">NODE ARC-001 | RC 722617 | PERFORMANCE SYNC ACTIVE</div>
    </div>

    <div id="status">SYSTEM READY</div>

    <div class="box">
        <label>Sentinel ID / Nickname</label>
        <input type="text" id="liaisonID" placeholder="ENTER ID">
    </div>

    <div class="box">
        <label>Material Category</label>
        <select id="category">
            <option value="Metal_Copper">COPPER / BRASS (Premium)</option>
            <option value="Metal_Iron">IRON / STEEL (Ferrous)</option>
            <option value="Plastic_PET">BOTTLES (PET)</option>
            <option value="Other_Utility">OTHER RECOVERED RWA</option>
        </select>
    </div>

    <div class="box">
        <label>Kilo Count (Verified Scale)</label>
        <input type="number" id="weight" step="0.1" placeholder="0.00">
        <button class="btn btn-push" onclick="submitData('KILO')" style="margin-top:10px;">Push to Ledger</button>
    </div>

    <button class="btn btn-incident" id="incidentToggle" onclick="toggleIncident()">!!! Report Field Confrontation</button>
    
    <div id="incidentBox" class="box" style="display:none; border-color:var(--red); margin-top:10px;">
        <label style="color:var(--red);">Resolution Resolution</label>
        <select id="iType" style="margin-bottom:5px;">
            <option value="Illegal Dumping">Stopped Illegal Dumping</option>
            <option value="Market Inquiry">Resolved Market Inquiry</option>
        </select>
        <select id="iMethod">
            <option value="NBP Script">3-Sentence Script Used</option>
            <option value="ID Scan">#Verify ID Scan Used</option>
            <option value="Whistle Blast">Whistle Blow/Control</option>
        </select>
        <button class="btn" style="background:var(--red); color:#fff; margin-top:10px;" onclick="submitData('INCIDENT')">Log Successful Shield</button>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzQT3xNHlwBNL-PWr1wqWG6anTHvyUh3Pl2WJOXH_9bHF6t6a7SqWNJJpt0aUhbacFx/exec";

    function toggleIncident() {
        const ib = document.getElementById('incidentBox');
        ib.style.display = ib.style.display === 'none' ? 'block' : 'none';
    }

    async function submitData(type) {
        const lid = document.getElementById('liaisonID').value;
        const status = document.getElementById('status');
        if(!lid) { 
            status.style.color = "var(--red)";
            status.innerText = "ERROR: ID REQUIRED"; 
            return; 
        }

        status.style.color = "var(--cyan)";
        status.innerText = "COMMUNICATING WITH NODE ARC-001...";

        let params = new URLSearchParams();
        params.append("Liaison", lid);
        params.append("ReportType", type);

        if(type === 'KILO') {
            params.append("Category", document.getElementById('category').value);
            params.append("Weight", document.getElementById('weight').value);
        } else {
            params.append("IType", document.getElementById('iType').value);
            params.append("Method", document.getElementById('iMethod').value);
            params.append("Outcome", "RESOLVED");
        }

        try {
            const response = await fetch(SCRIPT_URL + "?" + params.toString(), { method: 'POST' });
            if(response.ok) {
                status.style.color = "var(--green)";
                status.innerText = "SUCCESS: THE LEDGER IS FINAL";
                setTimeout(() => location.reload(), 2000);
            }
        } catch(e) {
            status.style.color = "var(--red)";
            status.innerText = "CONNECTION ERROR: LOG LOCALLY";
        }
    }
</script>
</body>
</html>
